<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>STAC API - Children</title>
    <style>
      body {
        font-family: sans-serif;
      }
    </style>
  </head>
  <body>
    <h1>STAC API - Children</h1>
    <ul id="schema-list">
    </ul>
    <script type="text/javascript">
      (async () => {
        const response = await fetch(`https://api.github.com/repos/stac-api-extensions/children/git/trees/gh-pages?recursive=true`);
        const data = await response.json();
        schemas = data.tree
          .filter(f => f.path.startsWith('v') && f.type === 'blob')
          .sort((a, b) => a.path.localeCompare(b.path));
        // Create a list of links to each file,grouped by folder / version
        let htmlString = '';
        let currentVersion = '';
        schemas.forEach(schema => {
          const [version, filename] = schema.path.split('/', 2);
          if (version !== currentVersion) {
            if (currentVersion !== '') {
              htmlString += '</ul>';
            }
            currentVersion = version;
            htmlString += `<li><strong>${version}</strong><ul>`;
          }
          htmlString += `<li><a href="${schema.path}" target="_blank">${filename}</a></li>`;
        });
        
        document.getElementById('schema-list').innerHTML = htmlString;
      })();
    </script>
  </body>
</html>